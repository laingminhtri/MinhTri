

<!DOCTYPE html>
<html lang="vi">

<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMR-ELECTRONIC MEDICAL RECORD DETECTION PROJECT</title>
    <link href="https://unpkg.com/filepond/dist/filepond.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link href="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css" rel="stylesheet" />   
    
    <style>
        body {
            height: 100vh;
            position: relative;
        }

        body {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            content: '';
            
        }

        h1 {
            text-align: center;
            background: #029f9f;
            display: inline-block;
            text-align: center;
            margin: auto;
            padding: 20px 40px;
            color: white;
            margin-bottom: 30px;
            border-radius: 20px;
        }

        #main-container {
            text-align: center;
            max-width: 90vw;
            z-index: 1000;
            opacity: 1;
            margin: 20px auto;
            border-radius: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
        }

        .text-justify {
            text-align: justify;
        }

        .result {
            padding: 0 20px;
            font-size: 2em;
        }
    </style>
    <div class="container" id="main-container">
        <h1>EMR-ELECTRONIC MEDICAL RECORD DETECTION PROJECT</h1>
        <div class="row">
            <div class="col-4 text-justify">

                <style>
                    * {box-sizing: border-box}
                    body {font-family: "Lato", sans-serif;}
                    
                    /* Style the tab */
                    .tab {
                      float: left;
                      border: 1px solid #ccc;
                      background-color: #f1f1f1;
                      width: 30%;
                      height: 300px;
                    }
                    
                    /* Style the buttons inside the tab */
                    .tab button {
                      display: block;
                      background-color: inherit;
                      color: black;
                      padding: 22px 16px;
                      width: 100%;
                      border: none;
                      outline: none;
                      text-align: left;
                      cursor: pointer;
                      transition: 0.3s;
                      font-size: 17px;
                    }
                    
                    /* Change background color of buttons on hover */
                    .tab button:hover {
                      background-color: #ddd;
                    }
                    
                    /* Create an active/current "tab button" class */
                    .tab button.active {
                      background-color: #ccc;
                    }
                    
                    /* Style the tab content */
                    .tabcontent {
                      float: left;
                      padding: 0px 12px;
                      border: 1px solid #ccc;
                      width: 70%;
                      border-left: none;
                      height: 300px;
                }
                </style>
                    
                
                </head>
                <body>
    
    
    
    
    
    
    
    
    
    
    <title>EMR-ELECTRONIC MEDICAL RECORD DETECTION PROJECT</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        body {
            background: white;
        }

        .container {
            border: 1px solid grey;
            margin: 1rem;
        }

        [data-tab-info] {
            display: none;
        }

        .active[data-tab-info] {
            display: block;
        }

        .tab-content {
            margin-top: 1rem;
            padding-left: 1rem;
            font-size: 20px;
            font-family: sans-serif;
            font-weight: bold;
            color: rgb(0, 0, 0);
        }

        .tabs {
            border-bottom: 1px solid grey;
            background-color: rgb(16, 153, 9);
            font-size: 25px;
            color: rgb(0, 0, 0);
            display: flex;
            margin: 0;
        }

        .tabs span {
            background: rgb(16, 153, 9);
            padding: 10px;
            border: 1px solid rgb(255, 255, 255);
        }

        .tabs span:hover {
            background: rgb(55, 219, 46);
            cursor: pointer;
            color: black;
        }
    </style>
</head>

<body>

    <!-- Body Container -->
    <div class="container">

        <!-- Tabs Detail -->
        <div class="tabs">
            <span data-tab-value="#Home">Home</span>
            <span data-tab-value="#EMR-Dự báo bệnh tiềm ẩn">EMR-Dự báo bệnh tiềm ẩn</span>
            <!--<span data-tab-value="#Dự báo bệnh tiềm ẩn">Dự báo bệnh tiềm ẩn</span>-->
            <span data-tab-value="#Phân tích EMR chuyên sâu">Phân tích EMR chuyên sâu</span>
            <!--<span data-tab-value="#Liêm hệ">Liên hệ</span>-->
            <!--<span data-tab-value="#Về Công ty chúng tôi">Về Công ty chúng tôi</span>-->
        </div>

        <!-- Tab content -->
        <div class="tab-content">

            <div class="overlay">
                <!-- LOGN IN FORM by Omar Dsoky -->
                <form>
                   <!--   con = Container  for items in the form-->
                   <div class="con">
                   <!--     Start  header Content  -->
                   <header class="head-form">
                      <h2>Log In</h2>
                      <!--     A welcome message or an explanation of the login form -->
                      <p>login here using your username and password</p>
                   </header>
                   <!--     End  header Content  -->
                   <br>
                   <div class="field-set">
                     
                      <!--   user name -->
                         <span class="input-item">
                           <i class="fa fa-user-circle"></i>
                         </span>
                        <!--   user name Input-->
                         <input class="form-input" id="txt-input" type="text" placeholder="@UserName" required>
                     
                      <br>
                     
                           <!--   Password -->
                     
                      <span class="input-item">
                        <i class="fa fa-key"></i>
                       </span>
                      <!--   Password Input-->
                      <input class="form-input" type="password" placeholder="Password" id="pwd"  name="password" required>
                     
                <!--      Show/hide password  -->
                     <span>
                        <i class="fa fa-eye" aria-hidden="true"  type="button" id="eye"></i>
                     </span>
                     
                     
                      <br>
                <!--        buttons -->
                <!--      button LogIn -->
                      <button class="log-in"> Log In </button>
                   </div>
                  
                <!--   other buttons -->
                   <div class="other">
                <!--      Forgot Password button-->
                      <button class="btn submits frgt-pass">Forgot Password</button>
                <!--     Sign Up button -->
                      <button class="btn submits sign-up">Sign Up 
                <!--         Sign Up font icon -->
                      <i class="fa fa-user-plus" aria-hidden="true"></i>
                      </button>
                <!--      End Other the Division -->
                   </div>
                     
                <!--   End Conrainer  -->
                  </div>
                  
                  <!-- End Form -->
                </form>
                </div>
        
        
            <style>

            <div class="tabs__tab activbe" id="EMR-Signin" data-tab-info></div>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
            <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css'><link rel="stylesheet" href="./style.css">
        /* Fonts Form Google Font ::- https://fonts.google.com/  -:: */
        @import url('https://fonts.googleapis.com/css?family=Abel|Abril+Fatface|Alegreya|Arima+Madurai|Dancing+Script|Dosis|Merriweather|Oleo+Script|Overlock|PT+Serif|Pacifico|Playball|Playfair+Display|Share|Unica+One|Vibur');
        /* End Fonts */
        /* Start Global rules */
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        /* End Global rules */
        
        /* Start body rules */
        body {
            background-image: linear-gradient(-225deg, #E3FDF5 0%, #FFE6FA 100%);
        background-image: linear-gradient(to top, #a8edea 0%, #fed6e3 100%);
        background-attachment: fixed;
          background-repeat: no-repeat;
        
            font-family: 'Vibur', cursive;
        /*   the main font */
            font-family: 'Abel', sans-serif;
        opacity: .95;
        /* background-image: linear-gradient(to top, #d9afd9 0%, #97d9e1 100%); */
        }
        
        
        
        /* |||||||||||||||||||||||||||||||||||||||||||||*/
        /* //////////////////////////////////////////// */
        
        
        
        
        /* End body rules */
        
        /* Start form  attributes */
        form {
            width: 450px;
            min-height: 500px;
            height: auto;
            border-radius: 5px;
            margin: 2% auto;
            box-shadow: 0 9px 50px hsla(20, 67%, 75%, 0.31);
            padding: 2%;
            background-image: linear-gradient(-225deg, #E3FDF5 50%, #FFE6FA 50%);
        }
        /* form Container */
        form .con {
            display: -webkit-flex;
            display: flex;
          
            -webkit-justify-content: space-around;
            justify-content: space-around;
          
            -webkit-flex-wrap: wrap;
            flex-wrap: wrap;
          
              margin: 0 auto;
        }
        
        /* the header form form */
        header {
            margin: 2% auto 10% auto;
            text-align: center;
        }
        /* Login title form form */
        header h2 {
            font-size: 250%;
            font-family: 'Playfair Display', serif;
            color: #3e403f;
        }
        /*  A welcome message or an explanation of the login form */
        header p {letter-spacing: 0.05em;}
        
        
        
        /* //////////////////////////////////////////// */
        /* //////////////////////////////////////////// */
        
        
        .input-item {
            background: #fff;
            color: #333;
            padding: 14.5px 0px 15px 9px;
            border-radius: 5px 0px 0px 5px;
        }
        
        
        
        /* Show/hide password Font Icon */
        #eye {
            background: #fff;
            color: #333;
          
            margin: 5.9px 0 0 0;
            margin-left: -20px;
            padding: 15px 9px 19px 0px;
            border-radius: 0px 5px 5px 0px;
          
            float: right;
            position: relative;
            right: 1%;
            top: -.2%;
            z-index: 5;
            
            cursor: pointer;
        }
        /* inputs form  */
        input[class="form-input"]{
            width: 240px;
            height: 50px;
          
            margin-top: 2%;
            padding: 15px;
            
            font-size: 16px;
            font-family: 'Abel', sans-serif;
            color: #5E6472;
          
            outline: none;
            border: none;
          
            border-radius: 0px 5px 5px 0px;
            transition: 0.2s linear;
            
        }
        input[id="txt-input"] {width: 250px;}
        /* focus  */
        input:focus {
            transform: translateX(-2px);
            border-radius: 5px;
        }
        
        /* //////////////////////////////////////////// */
        /* //////////////////////////////////////////// */
        
        /* input[type="text"] {min-width: 250px;} */
        /* buttons  */
        button {
            display: inline-block;
            color: #252537;
          
            width: 280px;
            height: 50px;
          
            padding: 0 20px;
            background: #fff;
            border-radius: 5px;
            
            outline: none;
            border: none;
          
            cursor: pointer;
            text-align: center;
            transition: all 0.2s linear;
            
            margin: 7% auto;
            letter-spacing: 0.05em;
        }
        /* Submits */
        .submits {
            width: 48%;
            display: inline-block;
            float: left;
            margin-left: 2%;
        }
        
        /*       Forgot Password button FAF3DD  */
        .frgt-pass {background: transparent;}
        
        /*     Sign Up button  */
        .sign-up {background: #B8F2E6;}
        
        
        /* buttons hover */
        button:hover {
            transform: translatey(3px);
            box-shadow: none;
        }
        
        /* buttons hover Animation */
        button:hover {
            animation: ani9 0.4s ease-in-out infinite alternate;
        }
        @keyframes ani9 {
            0% {
                transform: translateY(3px);
            }
            100% {
                transform: translateY(5px);
            }
        }
        
        
            </style>
        
            <script>
        
                // Show/hide password onClick of button using Javascript only
        
        // https://stackoverflow.com/questions/31224651/show-hide-password-onclick-of-button-using-javascript-only
        
        function show() {
            var p = document.getElementById('pwd');
            p.setAttribute('type', 'text');
        }
        
        function hide() {
            var p = document.getElementById('pwd');
            p.setAttribute('type', 'password');
        }
        
        var pwShown = 0;
        
        document.getElementById("eye").addEventListener("click", function () {
            if (pwShown == 0) {
                pwShown = 1;
                show();
            } else {
                pwShown = 0;
                hide();
            }
        }, false);
        
        
        
            </script>

            
            
            <div class="tabs__tab actuve" id="Home" data-tab-info>

                <p>Số hóa hồ sơ bệnh án đang là xu hướng phát triển. Việc phân tích đồng bộ hồ sơ bệnh án điện tử EMR là thách thức và là cơ hội đối với các bệnh viện hiện nay.</p>
                <p>Đây là công cụ hỗ trợ mạnh mẽ không chỉ việc phân tích EMR, mà còn phân tích và dự báo bệnh tiềm ẩn dựa trên phân tích các xét nghiệm máu, hình ảnh y khoa như CT, XQ...</p>
                <p>Đề tài này xây dựng mô hình Mạng nơ-ron LSTM, một trong những phát triển quan trọng nhất trong lĩnh vực trí tuệ nhân tạo AI, để tự động phân loại chuỗi dữ liệu bệnh án của bệnh nhân để hỗ trợ các y, bác sỹ trong chẩn đoán bệnh tiềm ẩn của bệnh nhân trong quá trình điều trị.</p>

                <p> Liêm hệ</p>
                <p>Công ty TNHH MTV Minh Trí và những người bạn Marie Curie.</p>
                <p> 159 Nam Kỳ Khởi Nghĩa, Quận 3, Tp. Hồ Chí Minh</p>                
                <p>Lại Nguyễn Minh Trí - laingminhtri@gmail.com - 0908083566.</p>
            </div>

            
            

            
        

            


            <div class="tabs__tab" id="EMR" data-tab-info>
                <p>Vui lòng chọn file EMR để truy vấn hồ sơ EMR của bạn.</p>
                
    <script>  
            $(function () {
            $.fn.filepond.registerPlugin(FilePondPluginImagePreview);

            $('.uploader').filepond({
                maxFileSize: '5MB',
                imageCropAspectRatio: '1:1',
                imageResizeTargetWidth: 500,
                imagePreviewMaxHeight: window.innerHeight * 3 / 5,
                server: {
                    url: '/upload_file',
                    timeout: 60000,
                    process: {
                        method: 'POST',
                        withCredentials: false,
                        onload: (response) => {
                            var result = window.document.querySelector("#result-message");
                            var data = JSON.parse(response);
                            if (data.error) {
                                result.classList.add('text-danger');
                                result.textContent = data.error;
                            } else {
                                result.classList.add('text-success');
                                result.innerHTML = `File uploaded and processed successfully! <a href="${data.report_url}" target="_blank">View Report</a>`;
                            }
                            result.classList.add('animate__animated', 'animate__bounceInUp');
                        }
                    },
                },
            });

            $('.uploader').filepond('allowMultiple', true);

            $('.uploader').on('FilePond:addfile', function (e) {
                var result = window.document.querySelector("#result-message");
                result.classList.remove('animate__animated', 'animate__bounceInUp', 'text-danger', 'text-success');
                result.textContent = "";
            });

            $('.uploader').on('FilePond:addfile', function (e) {
                console.log('file added event', e);
            });
        });
    </script>

    
                
                              
            
            <div class="tabs__tab active" id="Dự báo bệnh tiềm ẩn" data-tab-info>
                <button type="button" onclick="dieu_huong()">Vui lòng chọn file thông tin xét nghiệm, EMR để dự đoán bệnh tiềm ẩn.</button>

                
                <button onclick="myFunction()">Vui lòng chọn file thông tin xét nghiệm, EMR để dự đoán bệnh tiềm ẩn.</button>

                <p> Vui lòng chọn file thông tin xét nghiệm, EMR để dự đoán bệnh tiềm ẩn. </p>
            </div>

            <div class="tabs__tab active" id="Phân tích EMR chuyên sâu" data-tab-info>
               <p>Vui lòng chọn file EMR để truy vấn EMR chuyên sâu của bạn.</p> 
               
                <button type="button" onclick="dieu_huong()">Vui lòng chọn file EMR để truy vấn EMR chuyên sâu của bạn.</button>

                
                <button onclick="myFunction()">Vui lòng chọn file EMR để truy vấn EMR chuyên sâu của bạn.</button>

                

            </div>


        </div>
    </div>

                   

            <input type="file" class="filepond uploader" name="file" multiple data-allow-reorder="true" data-max-file-size="3MB" data-max-files="1">
                <div class="result text-center">
                    <div class="" id="result-message"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
    <script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
    <script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.min.js"></script>
    <script src="https://unpkg.com/jquery-filepond/filepond.jquery.js"></script>
    <script src="https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js"></script>
    <script>
        $(function () {
            $.fn.filepond.registerPlugin(FilePondPluginImagePreview);

            $('.uploader').filepond({
                maxFileSize: '5MB',
                imageCropAspectRatio: '1:1',
                imageResizeTargetWidth: 500,
                imagePreviewMaxHeight: window.innerHeight * 3 / 5,
                server: {
                    url: '/upload_file',
                    timeout: 60000,
                    process: {
                        method: 'POST',
                        withCredentials: false,
                        onload: (response) => {
                            var result = window.document.querySelector("#result-message");
                            var data = JSON.parse(response);
                            if (data.error) {
                                result.classList.add('text-danger');
                                result.textContent = data.error;
                            } else {
                                result.classList.add('text-success');
                                result.innerHTML = `File uploaded and processed successfully! <a href="${data.report_url}" target="_blank">View Report</a>`;
                            }
                            result.classList.add('animate__animated', 'animate__bounceInUp');
                                                    }
                    },
                },
            });


            
            $('.uploader').filepond('allowMultiple', true);

            $('.uploader').on('FilePond:addfile', function (e) {
                var result = window.document.querySelector("#result-message");
                result.classList.remove('animate__animated', 'animate__bounceInUp', 'text-danger', 'text-success');
                result.textContent = "";
            });

            $('.uploader').on('FilePond:addfile', function (e) {
                console.log('file added event', e);
            });
        });
    </script>

<!-- <script> 
process: {
    method: 'POST',
    withCredentials: false,
    onload: (response) => {
        var result = document.querySelector("#result-message");
        var data = JSON.parse(response);
        if (data.error) {
            result.classList.add('text-danger');
            result.textContent = data.error;
        } else {
            result.classList.add('text-success');
            result.innerHTML = `File uploaded and processed successfully!<br>
                Predicted Diseases: ${data.predicted_diseases.join(', ')}<br>
                Disease Predictions: ${data.disease_pred.join(', ')}<br>
                Actual Diseases: ${data.disease_real.join(', ')}`;
        }
        result.classList.add('animate__animated', 'animate__bounceInUp');
    }
},
},
});

</script>    -->



<!-- <script>
const tf = require('@tensorflow/tfjs');
const { LabelEncoder } = require('some-label-encoder-library'); // You can create your own LabelEncoder

// Assume X_test, y_test, and model are already loaded or defined elsewhere

// Step 1: Encode non-numerical columns in X_test
let labelEncoder = new LabelEncoder();  // Create a LabelEncoder instance

// Loop through each column in X_test that contains non-numeric values
X_test.columns.forEach(column => {
  if (typeof X_test[column][0] === 'string') { // Check if the column has non-numeric data
    X_test[column] = labelEncoder.fitTransform(X_test[column]);  // Encode the column
  }
});

// Step 2: Use X_test for prediction
let predictions = model.predict(X_test);

// Assuming the model returns probabilities (binary classification), we threshold at 0.5
let predictedDiseases = predictions.arraySync().map(prediction => {
  return prediction > 0.5 ? 1 : 0;  // Convert to binary labels (0 or 1)
});

// Step 3: Print the predicted diseases
console.log(predictedDiseases);

// Step 4: Create and train the DecisionTreeClassifier
// In JavaScript, we don't have a direct equivalent to DecisionTreeClassifier like in scikit-learn, 
// so you will need to implement it using another library or use pre-trained models.

// For simplicity, let's assume we use TensorFlow.js to create a simple decision tree model.
const decisionTreeModel = tf.sequential();
// You'd typically create and train your decision tree model here. This is just a placeholder for illustration.
// decisionTreeModel.add(...);

decisionTreeModel.compile({ optimizer: 'adam', loss: 'binaryCrossentropy' });
await decisionTreeModel.fit(X_train, y_train, { epochs: 10 });

// Step 5: Predict using the trained DecisionTree model
let diseasePred = decisionTreeModel.predict(X_test);
diseasePred = diseasePred.arraySync().map(prediction => prediction > 0.5 ? 1 : 0);

// Step 6: Compare predictions with actual values
y_test.forEach((actual, i) => {
  if (diseasePred[i] !== actual) {
    console.log(`Pred: ${diseasePred[i]}\nActual: ${actual}\n`);
  }
});
</script>
 -->




  

<!--     <!-- File Upload Form -->
<!--     <form id="upload-form" enctype="multipart/form-data">
        <label for="file">Upload CSV file for prediction:</label>
        <input type="file" id="file" name="file" required>
        <button type="submit">Upload and Predict</button>
    </form>
    
    <h2>Prediction Results:</h2>
    <p><strong>Predicted Disease:</strong> <span id="disease_pred"></span></p>
    <p><strong>Actual Disease:</strong> <span id="disease_real"></span></p>
  -->



<!--     <script>
        // Handle form submission for file upload
        document.getElementById('upload-form').addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent the default form submission behavior
            
            // Get the file input element
            const fileInput = document.getElementById('file');
            const file = fileInput.files[0];

            // Prepare form data for sending to the server
            const formData = new FormData();
            formData.append('file', file);

            // Send the file to the server using Fetch API
            fetch('http://localhost:5000/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(result => {
                if (result.disease_pred && result.disease_real) {
                    // Display predicted and actual diseases
                    document.getElementById('disease_pred').textContent = result.disease_pred;
                    document.getElementById('disease_real').textContent = result.disease_real;
                } else {
                    // Handle errors from the server (e.g., invalid file type)
                    alert('Error: ' + result.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>

 --> 



<!-- <!-- File Upload Form -->
<!--     <form id="upload-form" enctype="multipart/form-data">
        <label for="file">Upload CSV file for prediction:</label>
        <input type="file" id="file" name="file" required>
        <button type="submit">Upload and Predict</button>
    </form>
    
    <h2>Mismatches (Predicted vs Actual):</h2>
    <div id="mismatch-results"></div>

    <script>
        // Handle form submission for file upload
        document.getElementById('upload-form').addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent the default form submission behavior
            
            // Get the file input element
            const fileInput = document.getElementById('file');
            const file = fileInput.files[0];

            // Prepare form data for sending to the server
            const formData = new FormData();
            formData.append('file', file);

            // Send the file to the server using Fetch API
            fetch('http://localhost:5000/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(result => {
                if (result.mismatches && result.mismatches.length > 0) {
                    // Display the mismatches
                    let mismatchHtml = '';
                    result.mismatches.forEach(mismatch => {
                        mismatchHtml += `<p>Pred: ${mismatch.predicted_disease} | Actual: ${mismatch.actual_disease}</p>`;
                    });
                    document.getElementById('mismatch-results').innerHTML = mismatchHtml;
                } else if (result.error) {
                    // Handle errors from the server
                    alert('Error: ' + result.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script> --> -->




<!-- <h1>Upload Disease Data</h1>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="file" name="file" accept=".csv">
        <button type="submit">Upload</button>
    </form>

    <h2>Prediction Results:</h2>
    <div id="results"></div>

    <script>
        document.getElementById('uploadForm').addEventListener('submit', async function(event) {
            event.preventDefault();
            const formData = new FormData();
            const fileInput = document.getElementById('file');
            if (fileInput.files.length === 0) {
                alert('Please select a file');
                return;
            }
            formData.append('file', fileInput.files[0]);

            try {
                // Make the POST request to upload the file
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    alert('Error: ' + errorData.error);
                    return;
                }

                // Parse the JSON response
                const data = await response.json();

                if (data.mismatches && data.mismatches.length > 0) {
                    // Display mismatches (predicted vs actual)
                    let resultHTML = '<ul>';
                    data.mismatches.forEach(mismatch => {
                        resultHTML += `<li>Predicted: ${mismatch.disease_pred}, Actual: ${mismatch.disease_real}</li>`;
                    });
                    resultHTML += '</ul>';
                    document.getElementById('results').innerHTML = resultHTML;
                } else {
                    document.getElementById('results').innerHTML = 'No mismatches found or invalid data.';
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong. Please try again.');
            }
        });
    </script> -->




<!-- <h1>Upload Disease Data</h1>
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="file" name="file" accept=".csv">
        <button type="submit">Upload</button>
    </form>

    <h2>Prediction Results:</h2>
    <div id="results"></div>

    <script>
        document.getElementById('uploadForm').addEventListener('submit', async function(event) {
            event.preventDefault();  // Prevent form from submitting normally
            const formData = new FormData();
            const fileInput = document.getElementById('file');
            if (fileInput.files.length === 0) {
                alert('Please select a file');
                return;
            }
            formData.append('file', fileInput.files[0]);

            try {
                // Send POST request to Flask server
                const response = await fetch('http://127.0.0.1:5000/predict', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    alert('Error: ' + errorData.error);
                    return;
                }

                // Parse the JSON response containing predicted vs actual results
                const data = await response.json();

                if (data.length > 0) {
                    // If mismatches exist, create an unordered list to display them
                    let resultHTML = '<ul>';
                    data.forEach(mismatch => {
                        resultHTML += `<li>Predicted: ${mismatch.disease_pred}, Actual: ${mismatch.disease_real}</li>`;
                    });
                    resultHTML += '</ul>';
                    document.getElementById('results').innerHTML = resultHTML;
                } else {
                    document.getElementById('results').innerHTML = 'No mismatches found or all predictions are correct.';
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Something went wrong. Please try again.');
            }
        });
    </script>
 -->



<!--  <h1>Disease Prediction Results</h1>
    <pre id="output"></pre>
    <script>
        // Sample data (you would replace this with your actual data arrays)
        let disease_pred = [1, 0, 1, 0, 1]; // Example predicted values
        let disease_real = [1, 1, 0, 0, 1]; // Example actual values

        // Get the output element
        let outputElement = document.getElementById("output");

        // Loop through the arrays and compare values
        for (let i = 0; i < disease_real.length; i++) {
            if (disease_pred[i] !== disease_real[i]) {
                // Format the output to show predicted vs actual
                outputElement.textContent += `Prediction ${i + 1}:\nPredicted: ${disease_pred[i]}\nActual: ${disease_real[i]}\n\n`; 
      
            }
        }
    </script> -->



    


<!--    <h1>Disease Prediction</h1>

  <input type="file" id="fileInput">
  <button onclick="predict()">Predict</button>

  <div id="results"></div>

  <script>
    async function predict() {
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];

      if (!file) {
        alert('Please select a file.');
        return;
      }

      const formData = new FormData();
      formData.append('file', file);

      try {
        const response = await fetch('/predict', {
          method: 'POST',
          body: formData
        });

        const data = await response.json();

        const resultsDiv = document.getElementById('results');
        let resultsHtml = '';

        for (let i = 0; i < data.predicted.length; i++) {
          resultsHtml += `
            <p>
              Predicted: ${data.predicted[i]}<br>
              Actual: ${data.actuals[i]}
            </p>
          `;
        }

        resultsDiv.innerHTML = resultsHtml;

      } catch (error) {
        console.error('Error:', error);
        alert('An error occurred during prediction.');
      }
    }
  </script> -->






        <h1>Disease Prediction</h1>
    <input type="file" id="fileUpload" accept=".csv, .xlsx">
    <button id="predictButton">Predict</button>
    <div id="results"></div>

    <script>
        const fileUpload = document.getElementById('fileUpload');
        const predictButton = document.getElementById('predictButton');
        const resultsDiv = document.getElementById('results');

        predictButton.addEventListener('click', async () => {
            const file = fileUpload.files[0];
            if (!file) {
                resultsDiv.textContent = 'Please select a file to upload.';
                return;
            }

            const formData = new FormData();
            formData.append('file', file);

            // Replace with your actual server API endpoint URL
            const url = 'http://127.0.0.1:5000/predict';

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error(`Error: ${response.status}`);
                }

                const data = await response.json();
                const predictedDisease = data.predicted_disease;
                const actualDisease = data.actual_disease; // Assuming you're sending both in the response

                resultsDiv.innerHTML = `
                    <p>Predicted Disease: ${predictedDisease}</p>
                    <p>Actual Disease: ${actualDisease}</p>
                `;
            } catch (error) {
                console.error(error);
                resultsDiv.textContent = 'Error: ' + error.message;
            }
        });
    </script>

    
    

            <div class="tabs__tab" id="Liên hệ" data-tab-info>
                <p>Công ty TNHH MTV Minh Trí và những người bạn Marie Curie.</p>
                <p> 159 Nam Kỳ Khởi Nghĩa, Quận 3, Tp. Hồ Chí Minh</p>                
                <p>Lại Nguyễn Minh Trí - laingminhtri@gmail.com - 0908083566.</p>

            </div>

            <div class="tabs__tab" id="Về Công ty chúng tôi" data-tab-info>
                <p>Công ty TNHH MTV Minh Trí và những người bạn Marie Curie.</p>
                <p> 159 Nam Kỳ Khởi Nghĩa, Quận 3, Tp. Hồ Chí Minh</p>

            </div>

            
        

        

        
    

    <script type="text/javascript">

        // function to get each tab details
        const tabs = document.querySelectorAll('[data-tab-value]')
        const tabInfos = document.querySelectorAll('[data-tab-info]')

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = document
                    .querySelector(tab.dataset.tabValue);
                tabInfos.forEach(tabInfo => {
                    tabInfo.classList.remove('active')
                })
                target.classList.add('active');
            })
        })
    </script>
</body>

</html>
